<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>企业信息 - 启迪之星</title>
    <meta name="description" content=""/>
    <meta name="keywords" content=""/>
    <!-- javascript -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/jquery.easing.min.js"></script>
    <script src="js/plugins.js"></script>

    <!-- selectize js -->
    <script src="js/selectize.min.js"></script>

    <script src="js/jquery.nice-select.min.js"></script>

    <script src="js/app.js"></script>
    <script src="js/vue.min.js"></script>
    <script src="js/axios.min.js"></script>

    <!--topbar js-->
    <script src="js/topbar.js"></script>

    <script src="js/NavigationBar.js"></script>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
    <!--Material Icon -->
    <link rel="stylesheet" type="text/css" href="css/materialdesignicons.min.css"/>

    <link rel="stylesheet" type="text/css" href="css/fontawesome.css"/>

    <!-- selectize css -->
    <link rel="stylesheet" type="text/css" href="css/selectize.css"/>

    <link rel="stylesheet" type="text/css" href="css/nice-select.css"/>

    <!-- Custom  Css -->
    <link rel="stylesheet" type="text/css" href="css/style.css"/>

</head>

<body>
<div id="app">
    <!-- Loader -->
    <div id="preloader">
        <div id="status">
            <div class="spinner">
                <div class="double-bounce1"></div>
                <div class="double-bounce2"></div>
            </div>
        </div>
    </div>
    <!-- Loader -->

    <!-- Navigation Bar-->
    <navigation-bar></navigation-bar>
    <!-- Navbar End -->

    <!-- Start home -->
    <section class="bg-half page-next-level">
        <div class="bg-overlay"></div>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="text-center text-white">
                        <h4 class="text-uppercase title mb-4">企业信息</h4>
                        <ul class="page-next d-inline-block mb-0">
                            <li><a href="index.html" class="text-uppercase font-weight-bold">主页</a></li>
                            <li><a href="#" class="text-uppercase font-weight-bold">功能</a></li>
                            <li>
                                <span class="text-uppercase text-white font-weight-bold">个人中心</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- end home -->

    <!-- EMPLOYERS DETAILS START -->
    <section class="section">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="text-sm-center">

                        <form action="/uploadPhoto1" method="post" enctype="multipart/form-data">
                            <img id="img" v-bind:src="photoAddress"
                                 class="img-fluid avatar avatar-medium d-block mx-auto rounded-pill">
                            <div class="shangchuan">
                                <a href="javascript:;" class="file">选择照片<input type="file" class="custom-file-input"
                                                                               id="inputGroupFile01" name="image"
                                                                               aria-describedby="inputGroupFileAddon01"></a>
                            </div>
                            <div class="shangchuan">
                                <input class="file" type="submit" value="上传"/>
                            </div>
                        </form>

                        <h4 class="mt-3"><a href="#" class="text-dark">{{info.phone}}</a></h4>
                        <ul class="list-inline mb-0">
                            <li class="list-inline-item mr-3">
                                <p class="text-muted mb-0"><i class="mdi mdi-map-marker mr-2"></i>{{info.place}}</p>
                            </li>

                            <li class="list-inline-item">
                                <p class="text-success mb-0"><i class="mdi mdi-bookmark-check mdi-18px mr-2"></i>通过验证
                                </p>
                            </li>
                            <li class="list-inline-item">
                                <a href="Change-company-information.html">修改信息</a>
                            </li>
                        </ul>

                        <ul class="list-inline mb-2">

                            <li class="list-inline-item mr-3">
                                <p class="text-muted"><i class="mdi mdi-email mr-2"></i>{{info.email}}</p>
                            </li>

                            <li class="list-inline-item">
                                <p class="text-muted"><i class="mdi mdi-cellphone-iphone mr-2"></i>{{info.personphone}}
                                </p>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 mt-4 pt-2">
                    <h4>公司简介 :</h4>
                    <div class="rounded border p-4 mt-3">
                        <p class="text-muted">{{info.simpletro}}</p>
                    </div>
                </div>
            </div>
            <div style="margin-top: 20px;">
                <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab"
                           aria-controls="pills-home" aria-selected="true">待处理</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab"
                           aria-controls="pills-profile" aria-selected="false">历史记录</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="pills-job-tab" data-toggle="pill" href="#pills-job" role="tab"
                           aria-controls="pills-job" aria-selected="false">已发布的岗位</a>
                    </li>
                </ul>
            </div>
            <div class="tab-content" id="pills-tabContent">
                <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                    <table class="table table-borderless">
                        <thead class="thead-dark">
                        <tr>
                            <th scope="col">姓名</th>
                            <th scope="col">学校</th>
                            <th scope="col">专业</th>
                            <th scope="col">投递岗位</th>
                            <th scope="col">手机号</th>
                            <th scope="col"></th>
                            <th scope="col"></th>
                            <th scope="col"></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr v-for="item in infoList" v-if="item.restatus === '通知面试'">
                            <td>{{item.name}}</td>
                            <td>{{item.school}}</td>
                            <td>{{item.major}}</td>
                            <td>{{item.companyname}}</td>
                            <td>***********</td>
                            <td>
                                <button type="button" id="btn1" class="btn btn-sm  btn-primary"
                                        v-on:click="notify(item)">{{item.restatus}}
                                </button>
                            </td>
                            <td>
                                <button type="button" class="btn btn-sm btn-info" v-on:click="resumeInfo(item)">查看简历
                                </button>
                            </td>
                            <td>
                                <button type="button" class="btn btn-sm  btn-danger" v-on:click="reject(item)">拒绝
                                </button>
                            </td>
                        </tr>
                        <tr v-for="item in infoList" v-if="item.restatus === '通知报到'">
                            <td>{{item.name}}</td>
                            <td>{{item.school}}</td>
                            <td>{{item.major}}</td>
                            <td>{{item.companyname}}</td>
                            <td>{{item.phone}}</td>
                            <td>
                                <button type="button" id="btn2" class="btn btn-sm  btn-warning"
                                        v-on:click="notify(item)">{{item.restatus}}
                                </button>
                            </td>
                            <td>
                                <button type="button" class="btn btn-sm btn-info" v-on:click="resumeInfo(item)">查看简历
                                </button>
                            </td>
                            <td>
                                <button type="button" class="btn btn-sm  btn-danger" v-on:click="reject(item)">拒绝
                                </button>
                            </td>
                        </tr>
                        <tr v-for="item in infoList" v-if="item.restatus === '确认已报到'">
                            <td>{{item.name}}</td>
                            <td>{{item.school}}</td>
                            <td>{{item.major}}</td>
                            <td>{{item.companyname}}</td>
                            <td>{{item.phone}}</td>
                            <td>
                                <button type="button" id="btn3" class="btn btn-sm  btn-success"
                                        v-on:click="notify(item)">{{item.restatus}}
                                </button>
                            </td>
                            <td>
                                <button type="button" class="btn btn-sm btn-info" v-on:click="resumeInfo(item)">查看简历
                                </button>
                            </td>
                            <td>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
                    <table class="table table-borderless">
                        <thead class="thead-dark">
                        <tr>
                            <th scope="col">姓名</th>
                            <th scope="col">学校</th>
                            <th scope="col">专业</th>
                            <th scope="col">投递岗位</th>
                            <th scope="col">手机号</th>
                            <th scope="col">转态</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr v-for="item in infoList" v-if="item.status === '已被录用' || item.status === '已拒绝' ">
                            <td>{{item.name}}</td>
                            <td>{{item.school}}</td>
                            <td>{{item.major}}</td>
                            <td>{{item.companyname}}</td>
                            <td>{{item.phone}}</td>
                            <td>{{item.status}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>

                <div class="tab-pane fade" id="pills-job" role="tabpanel" aria-labelledby="pills-job-tab">
                    <div class="row">
                        <div class="col-lg-12 mt-4 pt-2" v-for="job in joblist">
                            <div class="job-list-box border rounded" @click="Jump(job.companyname)"
                                 style="cursor: pointer">
                                <div class="p-3">
                                    <div class="row align-items-center">
                                        <div class="col-lg-2">
                                            <div class="company-logo-img">
                                                <img src="images/featured-job/img-1.png" alt=""
                                                     class="img-fluid mx-auto d-block">
                                            </div>
                                        </div>
                                        <div class="col-lg-7 col-md-9">
                                            <div class="job-list-desc">
                                                <h6 class="mb-2"><a href="#" class="text-dark">{{job.companyname}}</a>
                                                </h6>
                                                <p class="text-muted mb-0"><i class="mdi mdi-bank mr-2"></i>{{job.company}}
                                                </p>
                                                <ul class="list-inline mb-0">
                                                    <li class="list-inline-item mr-3">
                                                        <p class="text-muted mb-0"><i
                                                                class="mdi mdi-map-marker mr-2"></i>{{job.place}}
                                                        </p>
                                                    </li>

                                                    <li class="list-inline-item">
                                                        <p class="text-muted mb-0"><i
                                                                class="mdi mdi-clock-outline mr-2"></i>{{job.time}}</p>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-3">
                                            <div class="job-list-button-sm text-right">
                                                <span class="badge badge-success">{{job.worktype}}</span>

                                                <div class="mt-3">
                                                    <a :href="'/job-details.html?name=' + job.companyname"
                                                       class="btn btn-sm btn-primary">查看详情</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
<!-- EMPLOYERS DETAILS END -->

<!-- footer start -->
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-12 mb-0 mb-md-4 pb-0 pb-md-2">
                <a href="javascript:void(0)"><img src="images/logo-light.png" height="20" alt=""></a>
                <p class="mt-4">启迪之星自1999年清华科技园孵化器成立起，累计投资100多个初创企业，投资总额超过1亿元 人民币，其中投资项目的地
                    方基金覆盖东北，华中，东部等地区，重点关注互联网+、TMT、 节能环保、新材料、生物医 药、先进制造、教育培训、 智能+、现代服务、大消费等 领域。</p>
            </div>
            <div class="col-lg-3 col-md-4 col-12 mt-4 mt-sm-0 pt-2 pt-sm-0">
                <p class="text-white mb-4 footer-list-title">启迪导航</p>
                <ul class="list-unstyled footer-list">
                    <li><a href="http://www.tusstar.com/" class="text-foot"><i class="mdi mdi-chevron-right"></i>
                        启迪之星</a></li>
                    <li><a href="http://invest.tusstar.com/" class="text-foot"><i class="mdi mdi-chevron-right"></i>
                        启迪天使投资</a></li>
                    <li><a href="index.html" class="text-foot"><i class="mdi mdi-chevron-right"></i> 启迪之星(青海)</a>
                    </li>
                </ul>
            </div>
            <div class="col-lg-3 col-md-4 col-12 mt-4 mt-sm-0 pt-2 pt-sm-0">
                <p class="text-white mb-4 footer-list-title">功能</p>
                <ul class="list-unstyled footer-list">
                    <li><a href="#" class="text-foot"><i class="mdi mdi-chevron-right"></i> 企业登录</a></li>
                    <li><a href="about.html" class="text-foot"><i class="mdi mdi-chevron-right"></i> 关于我们</a></li>
                    <li><a href="faq.html" class="text-foot"><i class="mdi mdi-chevron-right"></i> 常见问题</a></li>
                </ul>
            </div>

            <div class="col-lg-3 col-md-4 col-12 mt-4 mt-sm-0 pt-2 pt-sm-0">
                <p class="text-white mb-4 footer-list-title f-17">关于我们</p>
                <ul class="list-unstyled text-foot mt-4 mb-0">
                    <li>启迪之星(青海)分公司</li>
                    <li class="mt-2">青海省西宁市城北区</li>
                    <li class="mt-2">test@test.com</li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer end -->
<hr>
<footer class="footer footer-bar">
    <div class="container text-center">
        <div class="row justify-content-center">
            <div class="col-12">
                <div class="">
                    <p class="mb-0">© 2019 启迪之星(青海). Design </i> by <a href="https://www.qhu.edu.cn/">青海大学</a>.</p>
                </div>
            </div>
        </div>
    </div>
    <!--end container-->
</footer>
<!--end footer-->
<!-- Footer End -->

<!-- Back to top -->
<a href="#" class="back-to-top rounded text-center" id="back-to-top">
    <i class="mdi mdi-chevron-up d-block"> </i>
</a>
<!-- Back to top -->


<script>
    $(function () {
        $("[data-toggle='popover']").popover();
    });
</script>
<script>
    var app = new Vue({
        el: '#app',
        data: {
            info: [],
            infoList: [],
            joblist: [],
            name: '',
            newlin: '',
            photoAddress: "",
        },
        created() {
            document.getElementById("btn1").style.color = "black";
            var self = this
            axios.post('/center', {
                code: "1003"
            })
                .then(function (response) {
                    //console.log(response.data)
                    self.info = response.data[0];
                    self.infoList = response.data[1]
                })
                .catch(function (error) {
                    console.log(error);
                });
        },
        methods: {
            reject: function (item) {
                axios.post('/center', {
                    code: "1003",
                    stuphone: item.phone,
                    jobtitle: item.companyname,
                    action: "reject"
                })
                    .then(function (response) {
                        console.log(response.data)
                    })
                    .catch(function (error) {
                        console.log(error);
                    });
                location.reload();
            },
            notify: function (item) {
                axios.post('/center', {
                    code: "1003",
                    stuphone: item.phone,
                    status: item.restatus,
                    jobtitle: item.companyname,
                    action: "notify"
                })
                    .then(function (response) {
                    })
                    .catch(function (error) {
                        console.log(error);
                    });
                location.reload();
            },
            resumeInfo: function (item) {
                window.location = "candidates-profile.html?phone=" + item.phone;
            }
        },
        async mounted() {
            var self = this
            axios
                .post('/searchPhoto', {})
                .then(function (response) {
                    if (response.data == "error") {
                        console.log("头像查询时出现错误");
                    } else if (response.data == "noPhoto") {
                        self.photoAddress = "images/employers/img-3.jpg";
                    } else {
                        self.photoAddress = response.data[0].imgadress;
                    }
                })
                .catch(function (error) {
                    console.log(error);
                })

            await axios
                .post('/users', {
                    code: "1005",
                })
                .then(function (response) {
                    if (response.data.studentisadmin == "0") {
                        alert("登录用户非企业单位")
                        window.location = "userCenter.html"
                    }
                })
                .catch(function (error) {
                    console.log(error);
                });

            axios
                .post('/bussiness', {
                    code: "1011",
                    phone: self.phone
                })
                .then(function (response) {
                    self.joblist = response.data
                })
                .catch(function (error) {
                    console.log(error.message)
                })
        },
    })
</script>

<script type="text/javascript">
    var img = document.querySelector('input[name=image]');
    imgs = document.querySelector('#img');
    if (img) {
        img.addEventListener('change', function () {
            var file = this.files[0];
            var reader = new FileReader();
            // 监听reader对象的的onload事件，当图片加载完成时，把base64编码賦值给预览图片
            reader.addEventListener("load", function () {
                imgs.src = reader.result;
            }, false);
            // 调用reader.readAsDataURL()方法，把图片转成base64
            reader.readAsDataURL(file);
            $("img").eq(1).css("display", "block");
        }, false);
    }
</script>
</body>

</html>
